import{v as u}from"./v4-CQkTLCs1.js";const{addons:A}=__STORYBOOK_MODULE_PREVIEW_API__,{global:O}=__STORYBOOK_MODULE_GLOBAL__,{ImplicitActionsDuringRendering:b}=__STORYBOOK_MODULE_CORE_EVENTS_PREVIEW_ERRORS__;var T="storybook/actions",I=`${T}/action-event`,S={depth:10,clearOnStoryChange:!0,limit:50},m=(t,n)=>{let e=Object.getPrototypeOf(t);return!e||n(e)?e:m(e,n)},w=t=>!!(typeof t=="object"&&t&&m(t,n=>/^Synthetic(?:Base)?Event$/.test(n.constructor.name))&&typeof t.persist=="function"),D=t=>{if(w(t)){let n=Object.create(t.constructor.prototype,Object.getOwnPropertyDescriptors(t));n.persist();let e=Object.getOwnPropertyDescriptor(n,"view"),i=e==null?void 0:e.value;return typeof i=="object"&&(i==null?void 0:i.constructor.name)==="Window"&&Object.defineProperty(n,"view",{...e,value:Object.create(i.constructor.prototype)}),n}return t},j=()=>typeof crypto=="object"&&typeof crypto.getRandomValues=="function"?u():Date.now().toString(36)+Math.random().toString(36).substring(2);function l(t,n={}){let e={...S,...n},i=function(...o){var g,_;if(n.implicit){let d=(g="__STORYBOOK_PREVIEW__"in O?O.__STORYBOOK_PREVIEW__:void 0)==null?void 0:g.storyRenders.find(p=>p.phase==="playing"||p.phase==="rendering");if(d){let p=!((_=window==null?void 0:window.FEATURES)!=null&&_.disallowImplicitActionsInRenderV8),y=new b({phase:d.phase,name:t,deprecated:p});if(p)console.warn(y);else throw y}}let r=A.getChannel(),c=j(),a=5,s=o.map(D),R=o.length>1?s:s[0],h={id:c,count:0,data:{name:t,args:R},options:{...e,maxDepth:a+(e.depth||3),allowFunction:e.allowFunction||!1}};r.emit(I,h)};return i.isAction=!0,i.implicit=n.implicit,i}var E=(t,n)=>typeof n[t]>"u"&&!(t in n),P=t=>{let{initialArgs:n,argTypes:e,id:i,parameters:{actions:o}}=t;if(!o||o.disable||!o.argTypesRegex||!e)return{};let r=new RegExp(o.argTypesRegex);return Object.entries(e).filter(([c])=>!!r.test(c)).reduce((c,[a,s])=>(E(a,n)&&(c[a]=l(a,{implicit:!0,id:i})),c),{})},F=t=>{let{initialArgs:n,argTypes:e,parameters:{actions:i}}=t;return i!=null&&i.disable||!e?{}:Object.entries(e).filter(([o,r])=>!!r.action).reduce((o,[r,c])=>(E(r,n)&&(o[r]=l(typeof c.action=="string"?c.action:r)),o),{})},x=[F,P],f=Symbol.for("tinyspy:spy"),M=t=>{let{args:n,parameters:{actions:e}}=t;e!=null&&e.disable||Object.entries(n).filter(([,i])=>typeof i=="function"&&"_isMockFunction"in i&&i._isMockFunction).forEach(([i,o])=>{var c;let r=o.getMockImplementation()??(f in o?(c=o[f])==null?void 0:c.getOriginal():void 0);if((r==null?void 0:r._actionAttached)!==!0&&(r==null?void 0:r.isAction)!==!0){let a=(...s)=>(l(i)(...s),r==null?void 0:r(...s));a._actionAttached=!0,o.mockImplementation(a)}})},B=[M];export{x as argsEnhancers,B as loaders,f as tinySpyInternalState};
